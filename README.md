# checkout.com Devops Challenge

## Prerequisites
- AWS CLI: https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html
- Permissions in AWS to create resources and configured: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html

## Basic Website (static)
The website is generated by running the script: `cloudformation.sh` which deploys a CloudFormation stack using `cloudformation.json` as a template.
All resources are created in the `eu-west-1` region. `cloudformation.sh` takes parameters:
- `SiteName` (required); which must be globally unique.
- `CustomDomain` (optional); if set to `True`, creates a Route53 DNS record for `<SiteName>.com` in a pre-existing hosted zone named `<SiteName>.com`. The domain `<SiteName>.com` must first be registered with Route53 with a Hosted Zone created, see: https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-register.html

### S3 Hosted
By default, this cloudformation stack creates a S3 hosted site. This offers a http endpoint where basic site logic is available.
This endpoint is given as `S3WebsiteURL` in the Cloudformation Outputs, and is of the format: `http://<SiteName>.s3-website-<region>.amazonaws.com`
If `CustomDomain` is set as true, then the endpoint will be of the form `<SiteName>.com`

The index page of the website can be directly access via a https endpoint.
This endpoint is given as `S3BucketSecureURL` in the Cloudformation Outputs, and is of the format: `https://<SiteName>.s3.amazonaws.com/index.html`

Access Logs to assets hosted in S3 are pushed to a logging bucket: `<SiteName>-logs`. These can be analysed using tools such as Amazon Athena

#### S3 Public Access
If you block all public access at the account level, Amazon S3 will continue to block public access to the bucket.
In this scenario, you would have to edit your account-level Block Public Access settings.
https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-block-public-access.html
